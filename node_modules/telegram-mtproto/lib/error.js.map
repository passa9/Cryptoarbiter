{"version":3,"sources":["../src/error.js"],"names":["MTError","Error","getMessage","code","type","message","constructor","fullMessage","ErrorBadResponse","url","originalError","ErrorBadRequest","ErrorNotFound","err","config","TypeBufferIntError","getTypeBufferMessage","ctx","offset","length","intView","typeBuffer","AuthKeyError"],"mappings":";;;;;AAIO,MAAMA,OAAN,SAAsBC,KAAtB,CAA4B;AACjC,SAAOC,UAAP,CAAkBC,IAAlB,EAAgCC,IAAhC,EAA8CC,OAA9C,EAA+D;AAC7D,WAAQ,MAAKF,IAAK,KAAIC,IAAK,KAAIC,OAAQ,EAAvC;AACD;;AAGDC,cAAYH,IAAZ,EAA0BC,IAA1B,EAAwCC,OAAxC,EAAyD;AACvD,QAAME,cAAcP,QAAQE,UAAR,CAAmBC,IAAnB,EAAyBC,IAAzB,EAA+BC,OAA/B,CAApB;AACA,UAAME,WAAN;AACA,SAAKJ,IAAL,GAAYA,IAAZ;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACD;AAXgC;;QAAtBJ,O,GAAAA,O;AAcN,MAAMQ,gBAAN,SAA+BR,OAA/B,CAAuC;AAE5CM,cAAYG,GAAZ,EAAyBC,gBAA+B,IAAxD,EAA8D;AAC5D,UAAM,GAAN,EAAW,sBAAX,EAAmCD,GAAnC;AACA,QAAIC,aAAJ,EACE,KAAKA,aAAL,GAAqBA,aAArB;AACH;AAN2C;;QAAjCF,gB,GAAAA,gB;AASN,MAAMG,eAAN,SAA8BX,OAA9B,CAAsC;AAE3CM,cAAYG,GAAZ,EAAyBC,gBAA+B,IAAxD,EAA8D;AAC5D,UAAM,GAAN,EAAW,qBAAX,EAAkCD,GAAlC;AACA,QAAIC,aAAJ,EACE,KAAKA,aAAL,GAAqBA,aAArB;AACH;AAN0C;;QAAhCC,e,GAAAA,e;AASN,MAAMC,aAAN,SAA4BZ,OAA5B,CAAoC;AACzCM,cAAYO,GAAZ,EAAyB;AACvB,UAAM,GAAN,EAAW,gBAAX,EAA6BA,IAAIC,MAAJ,CAAWL,GAAxC;AACA;AACD;AAJwC;;QAA9BG,a,GAAAA,a;AAON,MAAMG,kBAAN,SAAiCf,OAAjC,CAAyC;AAC9C,SAAOgB,oBAAP,CAA4BC,GAA5B,EAA6C;AAC3C,QAAMC,SAASD,IAAIC,MAAnB;AACA,QAAMC,SAASF,IAAIG,OAAJ,CAAYD,MAAZ,GAAqB,CAApC;AACA,WAAQ,gCAA+BD,MAAO,YAAWC,MAAO,EAAhE;AACD;;AAEDb,cAAYW,GAAZ,EAA6B;AAC3B,QAAMZ,UAAUU,mBAAmBC,oBAAnB,CAAwCC,GAAxC,CAAhB;AACA,UAAM,GAAN,EAAW,aAAX,EAA0BZ,OAA1B;AACA,SAAKgB,UAAL,GAAkBJ,GAAlB;AACD;AAX6C;;QAAnCF,kB,GAAAA,kB;AAcN,MAAMO,YAAN,SAA2BtB,OAA3B,CAAmC;AACxCM,gBAAc;AACZ,UAAM,GAAN,EAAW,gBAAX,EAA6B,EAA7B;AACD;AAHuC;QAA7BgB,Y,GAAAA,Y","file":"error.js","sourcesContent":["//@flow\r\n\r\nimport type { TypeBuffer } from './tl/type-buffer'\r\n\r\nexport class MTError extends Error {\r\n  static getMessage(code: number, type: string, message: string) {\r\n    return `MT[${code}] ${type}: ${message}`\r\n  }\r\n  code: number\r\n  type: string\r\n  constructor(code: number, type: string, message: string) {\r\n    const fullMessage = MTError.getMessage(code, type, message)\r\n    super(fullMessage)\r\n    this.code = code\r\n    this.type = type\r\n  }\r\n}\r\n\r\nexport class ErrorBadResponse extends MTError {\r\n  originalError: Error\r\n  constructor(url: string, originalError?: Error | null = null) {\r\n    super(406, 'NETWORK_BAD_RESPONSE', url)\r\n    if (originalError)\r\n      this.originalError = originalError\r\n  }\r\n}\r\n\r\nexport class ErrorBadRequest extends MTError {\r\n  originalError: Error\r\n  constructor(url: string, originalError?: Error | null = null) {\r\n    super(406, 'NETWORK_BAD_REQUEST', url)\r\n    if (originalError)\r\n      this.originalError = originalError\r\n  }\r\n}\r\n\r\nexport class ErrorNotFound extends MTError {\r\n  constructor(err: Object) {\r\n    super(404, 'REQUEST_FAILED', err.config.url)\r\n    // this.originalError = err\r\n  }\r\n}\r\n\r\nexport class TypeBufferIntError extends MTError {\r\n  static getTypeBufferMessage(ctx: TypeBuffer) {\r\n    const offset = ctx.offset\r\n    const length = ctx.intView.length * 4\r\n    return `Can not get next int: offset ${offset} length: ${length}`\r\n  }\r\n  typeBuffer: TypeBuffer\r\n  constructor(ctx: TypeBuffer) {\r\n    const message = TypeBufferIntError.getTypeBufferMessage(ctx)\r\n    super(800, 'NO_NEXT_INT', message)\r\n    this.typeBuffer = ctx\r\n  }\r\n}\r\n\r\nexport class AuthKeyError extends MTError {\r\n  constructor() {\r\n    super(401, 'AUTH_KEY_EMPTY', '')\r\n  }\r\n}"]}